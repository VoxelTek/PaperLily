[gd_scene load_steps=36 format=2]

[ext_resource path="res://script/Managers/Rooms/GameRoom.cs" type="Script" id=1]
[ext_resource path="res://script/Core/Nodes/EditorOnlyVisibility.cs" type="Script" id=2]
[ext_resource path="res://script/Nodes/SpawnPoint.cs" type="Script" id=3]
[ext_resource path="res://script/Core/Nodes/GameOnlyVisibility.cs" type="Script" id=4]
[ext_resource path="res://resources/tileset/common_collision.tres" type="TileSet" id=5]
[ext_resource path="res://assets/sprite/ch1/mk/blessing_6/floor_4.png" type="Texture" id=6]
[ext_resource path="res://assets/sprite/ch1/mk/livingroom/wall_fireplace.png" type="Texture" id=7]
[ext_resource path="res://assets/sprite/ch1/mk/blessing_6/floor_1.png" type="Texture" id=8]
[ext_resource path="res://assets/sprite/ch1/mk/livingroom/wall_lights.png" type="Texture" id=9]
[ext_resource path="res://assets/sprite/ch1/mk/blessing_6/floor_2.png" type="Texture" id=10]
[ext_resource path="res://assets/sprite/ch1/mk/livingroom/furniture_cart.png" type="Texture" id=11]
[ext_resource path="res://assets/sprite/ch1/mk/blessing_6/floor_carpet.png" type="Texture" id=12]
[ext_resource path="res://assets/sprite/ch1/mk/blessing_6/bg.png" type="Texture" id=13]
[ext_resource path="res://assets/sprite/ch1/mk/blessing_6/floor_5.png" type="Texture" id=14]
[ext_resource path="res://assets/sprite/ch1/mk/blessing_6/floor_6.png" type="Texture" id=15]
[ext_resource path="res://assets/sprite/ch1/mk/blessing_6/floor_3.png" type="Texture" id=16]
[ext_resource path="res://assets/sprite/ch1/mk/livingroom/misc_plant_1.png" type="Texture" id=17]
[ext_resource path="res://script/Core/Nodes/EventTriggerRect.cs" type="Script" id=18]
[ext_resource path="res://script/Core/Nodes/EventTriggerItemRoom.cs" type="Script" id=19]
[ext_resource path="res://script/Core/Nodes/SimpleAnimatedSprite.cs" type="Script" id=20]
[ext_resource path="res://assets/sprite/ch1/cutscene/lacie_stab.png" type="Texture" id=21]
[ext_resource path="res://script/Core/Nodes/ActionGroup.cs" type="Script" id=22]
[ext_resource path="res://script/Core/Nodes/ActionPlayerVisibility.cs" type="Script" id=23]
[ext_resource path="res://script/Core/Nodes/ActionAnimation2D.cs" type="Script" id=24]
[ext_resource path="res://script/Core/Nodes/ActionVisibility2D.cs" type="Script" id=25]
[ext_resource path="res://script/Core/Nodes/ActionPositionPlayerAlign.cs" type="Script" id=26]
[ext_resource path="res://script/Core/Nodes/ActionPlayerSpeed.cs" type="Script" id=27]
[ext_resource path="res://script/Core/Nodes/ActionPlayerStateOverride.cs" type="Script" id=28]
[ext_resource path="res://assets/sprite/ch1/mk/common/floor_cobblestone_1.png" type="Texture" id=29]
[ext_resource path="res://assets/sprite/ch1/mk/common/floor_cobblestone_2.png" type="Texture" id=30]
[ext_resource path="res://assets/sprite/ch1/mk/common/floor_cobblestone_3.png" type="Texture" id=31]
[ext_resource path="res://resources/nodes/ch1/fireplace_fire.tscn" type="PackedScene" id=32]
[ext_resource path="res://assets/sprite/ch1/mk/blessing_6/sfx_fire.png" type="Texture" id=33]
[ext_resource path="res://script/Core/Nodes/VariableEnabler.cs" type="Script" id=34]
[ext_resource path="res://script/Core/Nodes/VariableVisibility2D.cs" type="Script" id=35]

[node name="Ch1_MK_Blessing_6" type="Node2D"]
script = ExtResource( 1 )
__meta__ = {
"_edit_lock_": true
}

[node name="Background" type="Node2D" parent="."]
__meta__ = {
"_edit_lock_": true
}

[node name="Bg" type="Sprite" parent="Background"]
position = Vector2( 217, 128 )
texture = ExtResource( 13 )

[node name="Floor1" type="Sprite" parent="Background"]
position = Vector2( 40, 186 )
texture = ExtResource( 8 )

[node name="Floor2" type="Sprite" parent="Background"]
position = Vector2( 95, 292 )
texture = ExtResource( 10 )

[node name="Floor3" type="Sprite" parent="Background"]
position = Vector2( 127, 353 )
texture = ExtResource( 16 )

[node name="Floor4" type="Sprite" parent="Background"]
position = Vector2( 303, 319 )
texture = ExtResource( 6 )

[node name="Floor5" type="Sprite" parent="Background"]
position = Vector2( 330, 276 )
texture = ExtResource( 14 )

[node name="Floor6" type="Sprite" parent="Background"]
position = Vector2( 401, 337 )
texture = ExtResource( 15 )

[node name="FloorCarpet" type="Sprite" parent="Background"]
position = Vector2( 210, 200 )
texture = ExtResource( 12 )

[node name="MiscPlant1" type="Sprite" parent="Background"]
position = Vector2( 145, 99 )
texture = ExtResource( 17 )

[node name="WallLights" type="Sprite" parent="Background"]
position = Vector2( 107, 102 )
texture = ExtResource( 9 )

[node name="WallLights2" type="Sprite" parent="Background"]
position = Vector2( 161, 30 )
texture = ExtResource( 9 )

[node name="WallLights3" type="Sprite" parent="Background"]
position = Vector2( 264, 17 )
texture = ExtResource( 9 )

[node name="WallLights4" type="Sprite" parent="Background"]
position = Vector2( 304, 80 )
texture = ExtResource( 9 )

[node name="WallFireplace" type="Sprite" parent="Background"]
position = Vector2( 211, 75 )
texture = ExtResource( 7 )

[node name="Fire" parent="Background/WallFireplace" instance=ExtResource( 32 )]
modulate = Color( 2, 1, 1, 1 )
position = Vector2( 2, 54 )
region_enabled = true
region_rect = Rect2( 0, 10, 240, 44 )

[node name="FurnitureCart" type="Sprite" parent="Background"]
position = Vector2( 280, 123 )
texture = ExtResource( 11 )

[node name="LacieStab1" type="Sprite" parent="Background"]
visible = false
position = Vector2( 211, 201 )
texture = ExtResource( 21 )
offset = Vector2( 0, -16 )
hframes = 5

[node name="LacieStab2" type="Sprite" parent="Background"]
visible = false
position = Vector2( 211, 201 )
texture = ExtResource( 21 )
offset = Vector2( 0, -16 )
hframes = 5
frame = 1
script = ExtResource( 20 )
FPS = 12.0
Autostart = false
AnimationFrames = "1,2"

[node name="LacieStab3" type="Sprite" parent="Background"]
visible = false
position = Vector2( 211, 201 )
texture = ExtResource( 21 )
offset = Vector2( 0, -16 )
hframes = 5
frame = 2
script = ExtResource( 20 )
FPS = 8.0
Loop = false
Autostart = false
AnimationFrames = "2,3,4"

[node name="CobblestoneIn" type="Node2D" parent="Background"]
position = Vector2( 209, 863 )

[node name="FloorCobblestone1" type="Sprite" parent="Background/CobblestoneIn"]
position = Vector2( 0, 201 )
texture = ExtResource( 29 )
offset = Vector2( 0.5, 0 )

[node name="FloorCobblestone2" type="Sprite" parent="Background/CobblestoneIn"]
position = Vector2( 0, 137 )
texture = ExtResource( 29 )
offset = Vector2( 0.5, 0 )

[node name="FloorCobblestone3" type="Sprite" parent="Background/CobblestoneIn"]
position = Vector2( 0, 74 )
texture = ExtResource( 30 )

[node name="FloorCobblestone4" type="Sprite" parent="Background/CobblestoneIn"]
position = Vector2( 0, 11 )
texture = ExtResource( 30 )

[node name="FloorCobblestone5" type="Sprite" parent="Background/CobblestoneIn"]
position = Vector2( 0, -51 )
texture = ExtResource( 31 )

[node name="FloorCobblestone6" type="Sprite" parent="Background/CobblestoneIn"]
position = Vector2( 0, -115 )
texture = ExtResource( 31 )

[node name="FloorCobblestone7" type="Sprite" parent="Background/CobblestoneIn"]
position = Vector2( 0, -179 )
texture = ExtResource( 31 )

[node name="FloorCobblestone8" type="Sprite" parent="Background/CobblestoneIn"]
position = Vector2( 0, -243 )
texture = ExtResource( 31 )

[node name="FloorCobblestone9" type="Sprite" parent="Background/CobblestoneIn"]
position = Vector2( 0, -307 )
texture = ExtResource( 31 )

[node name="FloorCobblestone10" type="Sprite" parent="Background/CobblestoneIn"]
position = Vector2( 0, -372 )
texture = ExtResource( 30 )

[node name="FloorCobblestone11" type="Sprite" parent="Background/CobblestoneIn"]
position = Vector2( 0, -435 )
texture = ExtResource( 30 )

[node name="FloorCobblestone12" type="Sprite" parent="Background/CobblestoneIn"]
position = Vector2( 0, -501 )
texture = ExtResource( 29 )
offset = Vector2( 0.5, 0 )

[node name="FloorCobblestone13" type="Sprite" parent="Background/CobblestoneIn"]
position = Vector2( 0, -564 )
texture = ExtResource( 29 )
offset = Vector2( 0.5, 0 )

[node name="Main" type="YSort" parent="."]
__meta__ = {
"_edit_lock_": true
}

[node name="Foreground" type="Node2D" parent="."]
__meta__ = {
"_edit_lock_": true
}

[node name="SfxFire" type="Sprite" parent="Foreground"]
visible = false
position = Vector2( 217, 191 )
texture = ExtResource( 33 )
offset = Vector2( 0.5, 0.5 )
hframes = 8
script = ExtResource( 20 )
FPS = 10.0

[node name="Lighting" type="Node2D" parent="."]
visible = false
script = ExtResource( 4 )
__meta__ = {
"_edit_lock_": true
}

[node name="Other" type="Node2D" parent="."]
script = ExtResource( 2 )
__meta__ = {
"_edit_lock_": true
}

[node name="TilesCol" type="TileMap" parent="Other"]
tile_set = ExtResource( 5 )
cell_size = Vector2( 32, 32 )
show_collision = true
collision_layer = 2
collision_mask = 0
format = 1
tile_data = PoolIntArray( 196609, 0, 0, 196610, 0, 0, 196611, 0, 0, 196612, 0, 0, 196613, 0, 0, 196614, 0, 0, 196615, 0, 0, 196616, 0, 0, 196617, 0, 0, 196618, 0, 0, 196619, 0, 0, 196620, 0, 0, 524289, 0, 0, 524290, 0, 0, 524291, 0, 0, 524292, 0, 0, 524293, 1, 2, 524295, 1, 3, 524296, 0, 0, 524297, 0, 0, 524298, 0, 0, 524299, 0, 0, 524300, 0, 0, 589829, 1, 2, 589831, 1, 3, 655365, 1, 2, 655367, 1, 3, 720901, 1, 2, 720903, 1, 3, 786437, 1, 2, 786439, 1, 3, 851973, 1, 2, 851975, 1, 3, 917509, 1, 2, 917511, 1, 3, 983045, 1, 2, 983047, 1, 3, 1048581, 1, 2, 1048583, 1, 3, 1114117, 1, 2, 1114119, 1, 3, 1179653, 1, 2, 1179655, 1, 3, 1245189, 1, 2, 1245191, 1, 3, 1310725, 1, 2, 1310727, 1, 3, 1376261, 1, 2, 1376263, 1, 3, 1441797, 1, 2, 1441799, 1, 3, 1507333, 1, 2, 1507335, 1, 3, 1572869, 1, 2, 1572871, 1, 3, 1638405, 1, 2, 1638407, 1, 3, 1703941, 1, 2, 1703943, 1, 3, 1769477, 1, 2, 1769479, 1, 3, 1835013, 1, 2, 1835015, 1, 3, 1900549, 1, 2, 1900551, 1, 3, 1966085, 1, 2, 1966087, 1, 3, 2031621, 1, 2, 2031623, 1, 3, 2097157, 1, 2, 2097159, 1, 3, 2162693, 1, 2, 2162695, 1, 3, 2228229, 1, 2, 2228231, 1, 3, 2293765, 0, 0, 2293766, 0, 0, 2293767, 0, 0 )
__meta__ = {
"_edit_lock_": true
}

[node name="Boundary" type="StaticBody2D" parent="Other"]
collision_layer = 2
collision_mask = 0
__meta__ = {
"_edit_lock_": true
}

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Other/Boundary"]
polygon = PoolVector2Array( 68, 128, 89, 148, 89, 150, 64, 150, 64, 153, 87, 166, 88, 170, 106, 187, 88, 193, 88, 198, 96, 207, 96, 208, 51, 235, 51, 238, 60, 241, 103, 241, 103, 249, 140, 254, 140, 256, 32, 256, 32, 128 )

[node name="CollisionPolygon2D2" type="CollisionPolygon2D" parent="Other/Boundary"]
polygon = PoolVector2Array( 344, 128, 352, 135, 357, 138, 357, 142, 313, 154, 312, 158, 334, 167, 367, 168, 374, 172, 355, 179, 362, 182, 359, 186, 336, 191, 319, 201, 345, 205, 348, 210, 365, 210, 384, 216, 384, 221, 367, 228, 367, 236, 267, 252, 267, 256, 416, 256, 416, 128 )

[node name="Events" type="Node2D" parent="Other"]
__meta__ = {
"_edit_lock_": true
}

[node name="event_enter" type="Node2D" parent="Other/Events"]
position = Vector2( 208, 260 )
script = ExtResource( 18 )
Solid = false
Trigger = 1
Area = Vector2( 64, 8 )

[node name="item_knife_use" type="Node" parent="Other/Events"]
script = ExtResource( 19 )
Items = "ch1.mk_knife_activated"

[node name="misc_fireplace" type="Node2D" parent="Other/Events"]
position = Vector2( 211, 128 )
script = ExtResource( 18 )
Area = Vector2( 96, 32 )

[node name="misc_cart" type="Node2D" parent="Other/Events"]
position = Vector2( 279, 128 )
script = ExtResource( 18 )
Area = Vector2( 45, 32 )

[node name="misc_cart2" type="Node2D" parent="Other/Events"]
position = Vector2( 147, 128 )
script = ExtResource( 18 )

[node name="misc_fire_1" type="Node2D" parent="Other/Events"]
position = Vector2( 210, 256 )
script = ExtResource( 18 )
Event = "misc_fire"
Enabled = false
Area = Vector2( 160, 32 )

[node name="misc_fire_2" type="Node2D" parent="Other/Events"]
position = Vector2( 147, 192 )
script = ExtResource( 18 )
Event = "misc_fire"
Enabled = false
Area = Vector2( 32, 96 )

[node name="misc_fire_3" type="Node2D" parent="Other/Events"]
position = Vector2( 273, 192 )
script = ExtResource( 18 )
Event = "misc_fire"
Enabled = false
Area = Vector2( 32, 96 )

[node name="Points" type="Node2D" parent="Other"]
__meta__ = {
"_edit_lock_": true
}

[node name="entrance" type="Node2D" parent="Other/Points"]
position = Vector2( 208, 1088 )
script = ExtResource( 3 )
Direction = 2

[node name="Updates" type="Node" parent="Other"]

[node name="fire_1" type="Node" parent="Other/Updates"]
script = ExtResource( 34 )
Variable = "ch1.temp_ending_1_12_on_fire"
Node = NodePath("../../Events/misc_fire_1")

[node name="fire_2" type="Node" parent="Other/Updates"]
script = ExtResource( 34 )
Variable = "ch1.temp_ending_1_12_on_fire"
Node = NodePath("../../Events/misc_fire_2")

[node name="fire_3" type="Node" parent="Other/Updates"]
script = ExtResource( 34 )
Variable = "ch1.temp_ending_1_12_on_fire"
Node = NodePath("../../Events/misc_fire_3")

[node name="fire_spr" type="Node" parent="Other/Updates"]
script = ExtResource( 35 )
Variable = "ch1.temp_ending_1_12_on_fire"
Node = NodePath("../../../Foreground/SfxFire")

[node name="hide_fireplace_fire" type="Node" parent="Other/Updates"]
script = ExtResource( 35 )
Variable = "ch1.temp_ending_1_12_on_fire"
Node = NodePath("../../../Background/WallFireplace/Fire")
Invert = true

[node name="Actions" type="Node" parent="Other"]

[node name="lacie_limp" type="Node" parent="Other/Actions"]
script = ExtResource( 22 )

[node name="limp_stand" type="Node" parent="Other/Actions/lacie_limp"]
script = ExtResource( 28 )
OldState = "walk"
NewState = "limp_walk"

[node name="limp_walk" type="Node" parent="Other/Actions/lacie_limp"]
script = ExtResource( 28 )
OldState = "stand"
NewState = "shadow_stand"

[node name="walk_slow" type="Node" parent="Other/Actions/lacie_limp"]
script = ExtResource( 27 )
Multiplier = 0.4

[node name="stab_stage_1" type="Node" parent="Other/Actions"]
script = ExtResource( 22 )

[node name="align_1" type="Node" parent="Other/Actions/stab_stage_1"]
script = ExtResource( 26 )
Node = NodePath("../../../../Background/LacieStab1")

[node name="align_2" type="Node" parent="Other/Actions/stab_stage_1"]
script = ExtResource( 26 )
Node = NodePath("../../../../Background/LacieStab2")

[node name="align_3" type="Node" parent="Other/Actions/stab_stage_1"]
script = ExtResource( 26 )
Node = NodePath("../../../../Background/LacieStab3")

[node name="hide_player" type="Node" parent="Other/Actions/stab_stage_1"]
script = ExtResource( 23 )
Visible = false

[node name="show_stab_1" type="Node" parent="Other/Actions/stab_stage_1"]
script = ExtResource( 25 )
Node = NodePath("../../../../Background/LacieStab1")

[node name="stab_stage_2" type="Node" parent="Other/Actions"]
script = ExtResource( 22 )

[node name="hide_stab_1" type="Node" parent="Other/Actions/stab_stage_2"]
script = ExtResource( 25 )
Node = NodePath("../../../../Background/LacieStab1")
Visible = false

[node name="show_stab_2" type="Node" parent="Other/Actions/stab_stage_2"]
script = ExtResource( 25 )
Node = NodePath("../../../../Background/LacieStab2")

[node name="start_anim" type="Node" parent="Other/Actions/stab_stage_2"]
script = ExtResource( 24 )
Node = NodePath("../../../../Background/LacieStab2")

[node name="stab_stage_3" type="Node" parent="Other/Actions"]
script = ExtResource( 22 )

[node name="hide_stab_2" type="Node" parent="Other/Actions/stab_stage_3"]
script = ExtResource( 25 )
Node = NodePath("../../../../Background/LacieStab2")
Visible = false

[node name="show_stab_3" type="Node" parent="Other/Actions/stab_stage_3"]
script = ExtResource( 25 )
Node = NodePath("../../../../Background/LacieStab3")

[node name="start_anim" type="Node" parent="Other/Actions/stab_stage_3"]
script = ExtResource( 24 )
Node = NodePath("../../../../Background/LacieStab3")
